From e80f0a5c3c77b79d74d8564c430d42b6c12025e8 Mon Sep 17 00:00:00 2001
From: Michel Zou <xantares09@hotmail.com>
Date: Fri, 23 Dec 2016 22:14:44 +0100
Subject: [PATCH] MPIR support

---
 Installation/cmake/modules/FindGMP.cmake   | 2 +-
 Number_types/include/CGAL/GMP/Gmpzf_type.h | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/Installation/cmake/modules/FindGMP.cmake b/Installation/cmake/modules/FindGMP.cmake
index 11f1add0ae..9f2ac1802b 100644
--- Installation/cmake/modules/FindGMP.cmake
+++ Installation/cmake/modules/FindGMP.cmake
@@ -40,7 +40,7 @@ else()
     cache_set( GMP_IN_CGAL_AUXILIARY TRUE )
   endif()
 
-  find_library(GMP_LIBRARIES NAMES gmp libgmp-10
+  find_library(GMP_LIBRARIES NAMES gmp libgmp-10 mpir
     HINTS ENV GMP_LIB_DIR
           ENV GMP_DIR
           ${CGAL_INSTALLATION_PACKAGE_DIR}/auxiliary/gmp/lib
diff --git a/Number_types/include/CGAL/GMP/Gmpzf_type.h b/Number_types/include/CGAL/GMP/Gmpzf_type.h
index d625802d34..4027eca947 100644
--- Number_types/include/CGAL/GMP/Gmpzf_type.h
+++ Number_types/include/CGAL/GMP/Gmpzf_type.h
@@ -83,10 +83,14 @@ public:
 
   // exponent type
   // --------------------
+#ifdef __MPIR_VERSION
+  typedef mpir_si Exponent;
+#else
   typedef long Exponent; // may overflow, but if it does, the mantissa is
                          // potentially too large to be useful, anyway;
                          // still, repeated squaring of a power of two
                          // quickly brings this type to its limits...
+#endif
 
   friend Gmpzf approximate_sqrt(const Gmpzf &f);
 
-- 
2.11.0

